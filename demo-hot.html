<!DOCTYPE html>
<html lang="en">

<head>
  <title>VR view</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="error" class="dialog">
    <div class="wrap">
      <h1 class="title">Error</h1>
      <p class="message">An unknown error occurred.</p>
    </div>
  </div>

  <div id="play-overlay">
    <img src="images/ic_play_arrow_white_24dp.svg" />
  </div>

  <div style="position: fixed;top:0;left:0;font-size:50px;border:solid 1px #f00;">
    <button style="border:solid 1px #00f;font-size:30px;" onclick="getGyro()">click get gyro</button>
    <br>
    <button style="border:solid 1px #00f;font-size:30px;" ontouchstart="getGyro()">touchstart get gyro</button>
    <br>
    <button style="border:solid 1px #00f;font-size:30px;" onclick="getGyro()">touchend get gyro</button>
  </div>
  <!-- <div id="container">
    <div id="deviceType">non iOS 13</div>
    <div style="text-align: center">
      <button id="permission">Ask for permission</button>
    </div>
    <div id="permissionStatus">Pending</div>
  </div> -->

  <script>
    WebVRConfig = {
      BUFFER_SCALE: 0.5,
      TOUCH_PANNER_DISABLED: false
    };
    // 页面配置，如果url参数没有配置，读取这里的配置信息
    WebVRConfig.PLAYER = {
      image: './examples/img/dolphins.jpg',
      is_autopan_off: true,
      hide_fullscreen_button: true,

      // video: 'video',
      // image: 'image',
      // preview: 'preview',
      // loop: 'loop',
      // volume: 'volume',
      // muted: 'muted',
      // isStereo: 'is_stereo',
      // defaultYaw: 'default_yaw',
      // isYawOnly: 'is_yaw_only',
      // isDebug: 'is_debug',
      // isVROff: 'is_vr_off',
      // isAutopanOff: 'is_autopan_off',
      // hideFullscreenButton: 'hide_fullscreen_button'
    }

    setTimeout(function () {
      // pitch: 0,
      //   yaw: 110,
      //     radius: 0.05,
      //       distance: 1
      window.worldRenderer.hotspotRenderer.add(0, 0, 0.05, 1, 'abc')
    }, 1000)

    function spotClick(data) {
      if (data.id) {
        alert(JSON.stringify(data))
      }
      console.log(JSON.stringify(data))
    }

    function getGyro() {
      if (!!window.DeviceMotionEvent && typeof DeviceMotionEvent.requestPermission === 'function') {
        DeviceMotionEvent.requestPermission()
          .then(response => {
            if (response == 'granted') {
              window.addEventListener('devicemotion', (e) => {

              })
            }
          })
          .catch(console.error)

      }
    }
  </script>

  <script src="build/three.js"></script>
  <script src="build/embed.js"></script>
</body>

</html>